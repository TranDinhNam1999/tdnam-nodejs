"use strict";var _require=require("express"),Router=_require.Router,asyncHandler=require("express-async-handler"),router=new Router,Todo=require("../services/todos"),ensuareLogIn=require("../middlewares/requireLogedIn");router.use(ensuareLogIn),router.get("/",asyncHandler(function(r,n){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Todo.findAllNotDone(r.currentUser.id));case 2:t=e.sent,n.render("todo2",{todos:t});case 4:case"end":return e.stop()}})})),router.get("/:id/done",asyncHandler(function(r,n){var t,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.params.id,e.next=3,regeneratorRuntime.awrap(Todo.findById(t));case 3:if((o=e.sent)&&o.userId===r.currentUser.id)return e.next=7,regeneratorRuntime.awrap(o.markAsDone());e.next=7;break;case 7:n.redirect("/todo2");case 8:case"end":return e.stop()}})})),module.exports=router;